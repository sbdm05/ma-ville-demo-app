<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>form</ion-title>
  </ion-toolbar>
</ion-header> -->

<ion-content [fullscreen]="true">
  <form [formGroup]='form' (ngSubmit)='onSubmit()'>
    <ion-list >
      <ion-list>
        <ion-item>
          <ion-input label="Catégorie" placeholder="Category" formControlName="category" ngDefaultControl></ion-input>
        </ion-item>

        <!-- <ion-item>
          <ion-input label="Sous-catégorie" type="text" placeholder="sous-catégorie" formControlName="subcategory"></ion-input>
        </ion-item> -->
          <div *ngIf="form.controls['category'].errors?.['required']">Ce champ doit être complété</div>
        <ion-item>
          <ion-input label="Adresse" type="text" placeholder='Lieu' formControlName="address" ngDefaultControl></ion-input>
          <div *ngIf="form.controls['address'].errors?.['minlength']">Ce champ doit être complété</div>
        </ion-item>

        <ion-item>
          <ion-textarea [autoGrow]="true" label="Description" placeholder="Décrivez la situation" formControlName="description" ngDefaultControl></ion-textarea>
          <div *ngIf="form.controls['description'].errors?.['minlength']">Ce champ doit être complété</div>
        </ion-item>

        <ion-item>
          <div>
              <ion-button (click)='onSelectPic()' [disabled]='addPicActive' ngDefaultControl>Sélectionner une image dans votre album</ion-button>
          <!-- <div *ngIf="form.get('picture')?.hasError('imageSizeExceeded')">Ce champ doit être complété</div> -->
          <div *ngIf="form.controls['picture'].errors?.['imageSizeExceeded']">
            <div class='error'>
               <p>
              Désolé, l'image est trop lourde.
            </p>
            <p>Veuillez choisir une autre image</p>
            </div>

          </div>

          </div>

        </ion-item>

        <ion-grid>
          <ion-row>
            <ion-col size="6" *ngFor="let photo of photos; index as position">

              <img [src]="photo.src">
              <ion-button (click)='onDeletePic()' color="danger">Supprimer</ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>



        <ion-item>
          <ion-input label="Nom" type="text" placeholder="Votre nom" placeholder='Votre nom' formControlName="contact_name" ngDefaultControl></ion-input>
        <div *ngIf="form.controls['contact_name'].errors?.['minlength']">Ce champ doit être complété</div>

        </ion-item>

    <ion-item>
      <ion-input label="Prénom" type="text" placeholder="Votre prénom" placeholder='Votre prénom' formControlName="contact_firstname" ngDefaultControl>
      </ion-input>
        <div *ngIf="form.controls['contact_firstname'].errors?.['minlength']">Ce champ doit être complété</div>

    </ion-item>
    <ion-item>
      <ion-input label="Mail" type="email" placeholder="contact@contact.com" placeholder='Votre e-mail'
        formControlName="contact_mail" ngDefaultControl>
      </ion-input>
        <div *ngIf="form.controls['contact_mail'].errors?.['pattern']">Email invalide</div>

    </ion-item>
        <ion-item>
          <ion-input label="Tél" type="text" placeholder="0600000000"
            formControlName="contact_tel" ngDefaultControl>
          </ion-input>
        <div *ngIf="form.controls['contact_tel'].errors?.['pattern']">10 chiffres sans espace</div>

        </ion-item>
      </ion-list>
    </ion-list>
  <ion-button expand="block" type='submit' [disabled]='this.form.invalid' *ngIf='!isSending'>Envoyer</ion-button>
  <ion-button expand="block" *ngIf='isSending'>Envoi en cours</ion-button>

  </form>
  {{this.form.invalid}}

</ion-content>


